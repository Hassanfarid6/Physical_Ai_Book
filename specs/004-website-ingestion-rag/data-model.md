# Data Model: Website Ingestion Pipeline

## Entities

### Content Chunk
**Description**: Represents a segment of text extracted from Docusaurus pages

**Fields**:
- `id` (string): Unique identifier for the chunk
- `url` (string): Source URL of the content
- `section` (string): Section identifier from the Docusaurus site
- `content` (string): The actual text content of the chunk
- `chunk_index` (integer): Position of this chunk within the source document
- `created_at` (datetime): Timestamp when the chunk was created

**Validation Rules**:
- `url` must be a valid URL format
- `content` must not exceed Cohere's input token limit
- `id` must be unique within the system

**Relationships**:
- One Content Chunk has one Embedding Vector (1:1)

### Embedding Vector
**Description**: High-dimensional vector representation of text content generated by Cohere models

**Fields**:
- `id` (string): Unique identifier that matches the Content Chunk ID
- `vector` (array of floats): The embedding vector values
- `model_name` (string): Name of the Cohere model used to generate the embedding
- `created_at` (datetime): Timestamp when the embedding was generated

**Validation Rules**:
- `vector` must have the correct dimensions for the specified model
- `model_name` must be a valid Cohere model identifier

**Relationships**:
- One Embedding Vector belongs to one Content Chunk (1:1)

### Metadata
**Description**: Structured information about each content chunk stored with embeddings in Qdrant

**Fields**:
- `url` (string): Source URL of the content
- `section` (string): Section identifier from the Docusaurus site
- `chunk_id` (string): ID of the content chunk
- `source_title` (string): Title of the source page (optional)
- `processed_at` (datetime): Timestamp when the content was processed

**Validation Rules**:
- All fields must be present when storing in Qdrant
- `url` must be a valid URL format

**Relationships**:
- One Metadata record describes one Content Chunk (1:1)

## State Transitions

### Content Processing States
1. **Discovered**: URL has been identified but not yet fetched
2. **Fetched**: Content has been retrieved from the URL
3. **Parsed**: Content has been extracted and structured
4. **Chunked**: Content has been divided into processable chunks
5. **Embedded**: Embeddings have been generated for the chunk
6. **Stored**: Embeddings and metadata have been saved to Qdrant
7. **Indexed**: Content is available for retrieval (final state)

## Data Flow

The data flows through the system as follows:
1. URLs are discovered from the Docusaurus site
2. Content is fetched and parsed into Content Chunk entities
3. Content Chunks are processed to create Embedding Vector entities
4. Content Chunks and Embedding Vectors are stored in Qdrant with Metadata
5. Content becomes available for retrieval in the RAG system